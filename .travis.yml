language: php
sudo: false
cache:
  directories:
    - $HOME/.composer/cache
    - vendor
    - $HOME/cphalcon
php:
- 5.3
- 5.4
- 5.5
- 5.6
env:
  global:
  - SKIP_MONGO_TESTS=1
  - secure: Bc5ZqvZ1YYpoPZNNuU2eCB8DS6vBYrAdfBtTenBs5NSxzb+Vjven4kWakbzaMvZjb/Ib7Uph7DGuOtJXpmxnvBXPLd707LZ89oFWN/yqQlZKCcm8iErvJCB5XL+/ONHj2iPdR242HJweMcat6bMCwbVWoNDidjtWMH0U2mYFy3M=
  - secure: R3bXlymyFiY2k2jf7+fv/J8i34wtXTkmD4mCr5Ps/U+vn9axm2VtvR2Nj+r7LbRjn61gzFE/xIVjYft/wOyBOYwysrfriydrnRVS0owh6y+7EyOyQWbRX11vVQMf8o31QCQE5BY58V5AJZW3MjoOL0FVlTgySJiJvdw6Pv18v+E=
services:
- mongodb
- redis-server
- cassandra
- mysql
- memcached
before_install:
  - composer install --prefer-source --no-interaction
  - vendor/bin/install-phalcon.sh 2.0.x
  - phpenv config-rm xdebug.ini || return 0
install:
- composer install --no-interaction
before_script:
- php -m
- psql -c 'create database oauth2_server_php;' -U postgres
after_script:
- php test/cleanup.php
